<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="é“¾è¡¨"><meta property="og:title" content="é“¾è¡¨" />
<meta property="og:description" content="é“¾è¡¨ åè½¬é“¾è¡¨ å¤´æ¡ï¼šè¿­ä»£ã€é€’å½’éƒ½è¦å†™å‡ºæ¥ã€‚
è¿­ä»£ç‰ˆæœ¬ï¼š
public ListNode reverseList(ListNode head) { ListNode newHead = new ListNode(); while (head != null) { // 5 -&gt; 4 -&gt; 3  //  ListNode tmp = head.next; head.next = newHead.next; newHead.next = head; head = tmp; } return newHead.next; } é€’å½’ç‰ˆæœ¬ã€‚
 å°†é“¾è¡¨æƒ³è±¡ä¸ºï¼šhead -&gt; å…¶ä½™éƒ¨åˆ†ï¼Œé‚£ä¹ˆç¿»è½¬ å…¶ä½™éƒ¨åˆ† å¦‚ä½•ç¿»è½¬ï¼šp = reverseList(head.next)ã€‚å…¶ä½™éƒ¨åˆ† çš„ next çš„èŠ‚ç‚¹éœ€è¦æŒ‡å‘ headï¼Œhead çš„ next èŠ‚ç‚¹éœ€è¦ç½®ä¸º nullï¼Œä»¥ç¡®ä¿ head å˜æˆäº†æœ«å°¾èŠ‚ç‚¹ã€‚æœ€åè¿”å› p èŠ‚ç‚¹ã€‚
  åœ¨å†™çš„æ—¶å€™ï¼Œæœ‰ä¸€æ¬¡å†™æˆäº† p.next = headï¼Œè¿™é‡Œæ˜¯ä¸æ­£ç¡®çš„ã€‚head." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kunzhao.org/docs/tutorial/algorithm/linkedlist/" /><meta property="article:section" content="docs" />



<title>é“¾è¡¨ | èµµå¤çš„ä¸ªäººç½‘ç«™</title>
<link rel="icon" href="/favicon.png" type="image/x-icon">


<link rel="stylesheet" href="/book.min.827556f4a4b428e6ff4e68c72777003c28afbb68322bd35664dd0889a941daa0.css" integrity="sha256-gnVW9KS0KOb/TmjHJ3cAPCivu2gyK9NWZN0IialB2qA=">


<script defer src="/en.search.min.d855943406294b3828037a1ac91f970000e2df3fe538f710d7050da0ed846095.js" integrity="sha256-2FWUNAYpSzgoA3oayR&#43;XAADi3z/lOPcQ1wUNoO2EYJU="></script>
<script>
var _hmt = _hmt || [];
(function() {
  if (location.hostname === "localhost" || 
    location.hostname === "127.0.0.1") {
    return;
  }

  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?d04ff9e23cec6cb39ebbee1b4883e269";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


<script data-ad-client="ca-pub-8950855178079071" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><span>èµµå¤çš„ä¸ªäººç½‘ç«™</span>
  </a>
</h2>








  

  
  





 
  
    




  
  <ul>
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/" >
      ğŸ’¡ æ•™ç¨‹
  </a>


    

    




  
  <ul>
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/front-end-optimization-guide/" >
      å‰ç«¯ä¼˜åŒ–æŒ‡å—
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/algorithm/" >
      ç®—æ³•
  </a>


    

    




  
  <ul>
    
      
        <li>

  <a href="/docs/tutorial/algorithm/backtracking/" >
      å›æº¯æ³•
  </a>

</li>
      
    
      
        <li>

  <a href="/docs/tutorial/algorithm/array/" >
      æ•°ç»„
  </a>

</li>
      
    
      
        <li>

  <a href="/docs/tutorial/algorithm/tree/" >
      æ ‘
  </a>

</li>
      
    
      
        <li>

  <a href="/docs/tutorial/algorithm/string/" >
      å­—ç¬¦ä¸²
  </a>

</li>
      
    
      
        <li>

  <a href="/docs/tutorial/algorithm/dp/" >
      åŠ¨æ€è§„åˆ’
  </a>

</li>
      
    
      
        <li>

  <a href="/docs/tutorial/algorithm/linkedlist/"  class="active">
      é“¾è¡¨
  </a>

</li>
      
    
  </ul>
  



  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/raft/" >
      raft
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/unix-command/" >
      UNIX å¸¸ç”¨å‘½ä»¤å¤§å…¨
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/unix-optimize/" >
      UNIX æ€§èƒ½ä¼˜åŒ–
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/vue3/" >
      Vue.js æ•™ç¨‹
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/git/" >
      Git æ•™ç¨‹
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/network/" >
      ç½‘ç»œåè®®
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/awk/" >
      AWK æ•™ç¨‹
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/devops/" >
      DevOps
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/sentinel/" >
      é˜¿é‡Œå·´å·´ Sentinel
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/zipkin/" >
      Zipkin æºç åˆ†æ
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/eureka/" >
      Netflix Eureka æºç åˆ†æ
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/distributed-storage/" >
      åˆ†å¸ƒå¼å­˜å‚¨
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/maven/" >
      Maven æ•™ç¨‹
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/java/" >
      Java æ•™ç¨‹
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/spring/" >
      Spring æ•™ç¨‹
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/distributed/" >
      åˆ†å¸ƒå¼ç³»ç»Ÿä¸æ¶æ„è®¾è®¡
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/softskill/" >
      ç®´è¨€ç®´å¥
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/database/" >
      æ•°æ®åº“
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/redis/" >
      Redis
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/bigdata/" >
      å¤§æ•°æ®åœºæ™¯
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/technique/" >
      æŠ€æœ¯
  </a>


    

    






  </li>


      
    
  </ul>
  



  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/programmer-interview/" >
      ğŸ‘ ç¨‹åºå‘˜é¢è¯•é¢˜
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/rocketmq/" >
      RocketMQ æºç åˆ†æ
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/books/" >
      ä¹¦ç±
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/javascript/" >
      JavaScript ä¸“æ 
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/it-zone/" >
      IT åœˆ
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/hire/" >
      æ‹›è˜
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/cloud-plus-bbs/" >
      äº‘&#43;ç¤¾åŒºæŠ€æœ¯æ²™é¾™
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tools/" >
      å®ç”¨å·¥å…·
  </a>


    

    






  </li>


      
    
  </ul>
  



  












<ul>
  
  <li>
    <a href="/posts/" >
        åšå®¢
      </a>
  </li>
  
</ul>



</nav>




  <script>(function(){var a=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>é“¾è¡¨</strong>

  <label for="toc-control">
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#åè½¬é“¾è¡¨">åè½¬é“¾è¡¨</a></li>
    <li><a href="#åè½¬é“¾è¡¨-1">åè½¬é“¾è¡¨â…¡</a></li>
    <li><a href="#lru">LRU</a></li>
    <li><a href="#ç›¸äº¤é“¾è¡¨">ç›¸äº¤é“¾è¡¨</a></li>
    <li><a href="#k-ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨">K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨</a></li>
    <li><a href="#é“¾è¡¨æ˜¯å¦æœ‰ç¯">é“¾è¡¨æ˜¯å¦æœ‰ç¯</a></li>
    <li><a href="#é“¾è¡¨æ‰¾åˆ°ç¯çš„å…¥å£èŠ‚ç‚¹">é“¾è¡¨æ‰¾åˆ°ç¯çš„å…¥å£èŠ‚ç‚¹</a></li>
    <li><a href="#åˆå¹¶-k-ä¸ªæœ‰åºé“¾è¡¨">åˆå¹¶ K ä¸ªæœ‰åºé“¾è¡¨</a></li>
    <li><a href="#åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬-n-ä¸ªç»“ç‚¹">åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹</a></li>
    <li><a href="#é‡æ’é“¾è¡¨">é‡æ’é“¾è¡¨</a></li>
    <li><a href="#åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ -ii">åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´  II</a></li>
    <li><a href="#æ’åºé“¾è¡¨">æ’åºé“¾è¡¨</a></li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
<article class="markdown">
  
<ins class="adsbygoogle"
style="display:block"
data-ad-client="ca-pub-8950855178079071"
data-ad-slot="6142361626"
data-ad-format="auto"
data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script><h1 id="é“¾è¡¨">é“¾è¡¨</h1>
<h2 id="åè½¬é“¾è¡¨">åè½¬é“¾è¡¨</h2>
<p>å¤´æ¡ï¼š<strong>è¿­ä»£</strong>ã€<strong>é€’å½’</strong>éƒ½è¦å†™å‡ºæ¥ã€‚</p>
<p><strong>è¿­ä»£</strong>ç‰ˆæœ¬ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">reverseList</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ListNode newHead <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">();</span>

    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>head <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// 5 -&gt; 4 -&gt; 3
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//
</span><span style="color:#75715e"></span>        ListNode tmp <span style="color:#f92672">=</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> newHead<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        newHead<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
        head <span style="color:#f92672">=</span> tmp<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">return</span> newHead<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>é€’å½’</strong>ç‰ˆæœ¬ã€‚</p>
<blockquote>
<p>å°†é“¾è¡¨æƒ³è±¡ä¸ºï¼š<code>head -&gt; å…¶ä½™éƒ¨åˆ†</code>ï¼Œé‚£ä¹ˆç¿»è½¬ <code>å…¶ä½™éƒ¨åˆ†</code> å¦‚ä½•ç¿»è½¬ï¼š<code>p = reverseList(head.next)</code>ã€‚<code>å…¶ä½™éƒ¨åˆ†</code> çš„ <code>next</code> çš„èŠ‚ç‚¹éœ€è¦æŒ‡å‘ <code>head</code>ï¼Œ<code>head</code> çš„ <code>next</code> èŠ‚ç‚¹éœ€è¦ç½®ä¸º <code>null</code>ï¼Œä»¥ç¡®ä¿ <code>head</code> å˜æˆäº†æœ«å°¾èŠ‚ç‚¹ã€‚æœ€åè¿”å› <code>p</code> èŠ‚ç‚¹ã€‚</p>
</blockquote>
<ul>
<li>åœ¨å†™çš„æ—¶å€™ï¼Œæœ‰ä¸€æ¬¡å†™æˆäº† <code>p.next = head</code>ï¼Œè¿™é‡Œæ˜¯ä¸æ­£ç¡®çš„ã€‚<code>head.next.next = head; head.next = null</code> è¿™æ˜¯çœŸæ­£å¹²æ´»çš„éƒ¨åˆ†ï¼Œæ˜¯çœŸæ­£å†³ç­–å¯¹äºä¸¤ä¸ªèŠ‚ç‚¹å¦‚ä½•ç¿»è½¬çš„è¿‡ç¨‹éƒ¨åˆ†ï¼Œå…¶ä¸å±äºé€’å½’ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">reverseList</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>head <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> head<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    ListNode p <span style="color:#f92672">=</span> reverseList<span style="color:#f92672">(</span>head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">);</span>
    head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
    head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">return</span> p<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="åè½¬é“¾è¡¨-1">åè½¬é“¾è¡¨â…¡</h2>
<p>ç¾å›¢é¢è¯•é¢˜ã€‚</p>
<p>è¿™é“é¢˜ï¼Œ<a href="https://leetcode-cn.com/problems/reverse-linked-list-ii/solution/java-shuang-zhi-zhen-tou-cha-fa-by-mu-yi-cheng-zho/">è¿™ç¯‡æ–‡ç« </a>çš„æ€è·¯éå¸¸ç®€æ´æ˜“æ‡‚ï¼Œå…¶æ ¸å¿ƒå°±æ˜¯é‡‡ç”¨<strong>å¤´æ’æ³•</strong>ï¼Œå¯ä»¥é—´æ¥è¾¾åˆ°<strong>åè½¬çš„æ•ˆæœ</strong>ã€‚ä¸‹é¢ç®—æ³•æ˜¯çœ‹è¿‡ä»–çš„æ€è·¯ä¹‹åï¼Œè‡ªå·±å†™å‡ºæ¥çš„ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œçœ‹ä¸‹å›¾ <code>removed</code> çš„ <code>next</code> èŠ‚ç‚¹åº”è¯¥è°ƒæ•´ä¸º <code>p</code>ï¼Œå³å†™ä½œ <code>removed.next = p</code>ï¼š</p>
<pre><code>[pre] -&gt; [p] -&gt; [p.next] -&gt; [p.next.next]
                   ^
                   |
                 removed
</code></pre><p>ç¬¬ä¸€æ¬¡è°ƒæ•´è¿™æ ·è¿˜å¯ä»¥ï¼Œæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ç¬¬äºŒæ¬¡è°ƒæ•´çš„æ—¶å€™ï¼Œå½“å‰æŒ‡é’ˆå°±å˜ä¸ºäº†ã€‚è¿™ä¸ªæ—¶å€™ä¸€ä¸‹å°±å¯ä»¥çœ‹å‡ºæ¥ <code>removed.next</code> å°±ä¸èƒ½æŒ‡å‘ <code>p</code> äº†ï¼Œè€Œåº”è¯¥æŒ‡å‘çš„æ°¸è¿œéƒ½æ˜¯ <code>pre.next</code>ã€‚<code>pre</code> æŒ‡é’ˆæ˜¯ä¸å˜çš„ã€‚</p>
<pre><code>[pre] -&gt; [p.next] -&gt; [p] -&gt; [p.next.next]
                                ^
                                |
                             removed
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">reverseBetween</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> left<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> right<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>left <span style="color:#f92672">==</span> right <span style="color:#f92672">||</span> head <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> head<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// [] -&gt; [x] -&gt; [y] -&gt; [z]
</span><span style="color:#75715e"></span>    ListNode DUMMY <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">();</span>
    DUMMY<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>

    ListNode pre <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    ListNode p <span style="color:#f92672">=</span> DUMMY<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> left<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        pre <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span>
        p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> right <span style="color:#f92672">-</span> left<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// [pre] -&gt; [p] -&gt; [p.next] -&gt; [p.next.next]
</span><span style="color:#75715e"></span>        ListNode removed <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        ListNode removedNext <span style="color:#f92672">=</span> removed<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>

        <span style="color:#75715e">// [pre] -&gt; [p] &lt;-&gt; [p.next]  [p.next.next]
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// ä¸èƒ½è¿™æ · removed.next = p;
</span><span style="color:#75715e"></span>        removed<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> pre<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#75715e">//   |--------------|
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//   |              v
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// [pre]  [p] &lt;-&gt; [p.next]  [p.next.next]
</span><span style="color:#75715e"></span>        pre<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> removed<span style="color:#f92672">;</span>
        <span style="color:#75715e">//   |--------------|
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//   |              v
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// [pre]  [p] &lt;- [p.next]  [p.next.next]
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//         |                     ^
</span><span style="color:#75715e"></span>        <span style="color:#75715e">//         |_____________________|
</span><span style="color:#75715e"></span>        p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> removedNext<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">return</span> DUMMY<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="lru">LRU</h2>
<ul>
<li>åº•å±‚æ•°æ®ç»“æ„æ˜¯ <code>Map</code>ï¼Œ<code>key</code> å°±æ˜¯ç”¨æˆ·ä¼ å…¥çš„ <code>key</code>ï¼Œè€Œ <code>value</code> åˆ™æ˜¯é€šè¿‡ <code>ListNode</code> æ¥å°è£…èµ·æ¥ã€‚å½“å‰æ‰€æœ‰çš„ <code>&lt;key, value&gt;</code> å¯¹é€šè¿‡<strong>åŒå‘é“¾è¡¨</strong>æ¥ä¸²èµ·æ¥ï¼Œ<code>head</code> èŠ‚ç‚¹æ˜¯æœ€è¿‘ä¸€æ¬¡åˆšåˆšè®¿é—®è¿‡çš„ï¼Œè€Œ <code>tail</code> æ˜¯å¾ˆé•¿æ—¶é—´éƒ½æ²¡æœ‰è®¿é—®è¿‡çš„ã€‚</li>
</ul>
<pre><code>[key1, value1]
[key2, value2]
...
[keyn, valuen]

[key1, value1] &lt;--&gt; [key2, value2] &lt;--&gt; ... [keyn, valuen]
</code></pre><p>æ‰€æœ‰çš„æ“ä½œåŸºæœ¬ä¸Šæ ¸å¿ƒçš„å°±æ˜¯è°ƒæ•´é”®å€¼å¯¹åœ¨<strong>åŒå‘é“¾è¡¨</strong>ä¸Šçš„é¡ºåºã€‚</p>
<ul>
<li>ç¬¬ä¸€æ¬¡ <code>put</code> çš„æ—¶å€™ï¼Œ<code>insertAtHead</code></li>
<li>ç¬¬äºŒæ¬¡ <code>put</code> çš„æ—¶å€™ï¼Œå³ <code>updateValue</code> çš„æ—¶å€™ï¼Œ<code>moveToHead</code> åšçš„æ“ä½œï¼Œé¦–å…ˆ <code>removeNode</code>ï¼Œç„¶åé‡æ–° <code>insertAtHead</code></li>
<li>ä¸ºäº†ä¿è¯ <code>remove</code> çš„å¤æ‚åº¦æ˜¯ <code>O(1)</code>ï¼Œæˆ‘ä»¬éœ€è¦å°† <code>ListNode</code> å®ç°ä¸º<strong>åŒå‘é“¾è¡¨</strong>ã€‚</li>
<li><code>get</code> çš„æ—¶å€™ï¼Œ<code>moveToHead</code>ã€‚</li>
</ul>
<blockquote>
<p>é€šè¿‡å€ŸåŠ© <code>DUMMY_HEAD</code> å’Œ <code>DUMMY_TAIL</code>ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå‡è½»å¤„ç†ç‰¹æ®Š case ç¼–ç çš„å¤æ‚åº¦ã€‚</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LRUCache</span> <span style="color:#f92672">{</span>
    
    <span style="color:#66d9ef">private</span> Map<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">,</span> ListNode<span style="color:#f92672">&gt;</span> cache <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">();</span>

    <span style="color:#75715e">// å…ˆå®ç°ä¸€ä¸ª remove() å¤æ‚åº¦æ˜¯ O(1) çš„åŒå‘é“¾è¡¨
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// head æ˜¯ rencently çš„ï¼Œtail æ˜¯å³å°†æ·˜æ±°çš„
</span><span style="color:#75715e"></span>    
    ListNode DUMMY_HEAD <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(-</span>1<span style="color:#f92672">,</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">);</span>
    ListNode DUMMY_TAIL <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(-</span>1<span style="color:#f92672">,</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">);</span>
    
    <span style="color:#f92672">{</span>
        DUMMY_HEAD<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> DUMMY_TAIL<span style="color:#f92672">;</span>
        DUMMY_TAIL<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> DUMMY_HEAD<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">LRUCache</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">capacity</span> <span style="color:#f92672">=</span> capacity<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">get</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        ListNode node <span style="color:#f92672">=</span> cache<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>key<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        
        moveToHead<span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">return</span> node<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        ListNode node <span style="color:#f92672">=</span> cache<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span>key<span style="color:#f92672">);</span>
        
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>cache<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">()</span> <span style="color:#f92672">==</span> capacity<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                ListNode tailNode <span style="color:#f92672">=</span> DUMMY_TAIL<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span><span style="color:#f92672">;</span>
                removeNode<span style="color:#f92672">(</span>tailNode<span style="color:#f92672">);</span>
                cache<span style="color:#f92672">.</span><span style="color:#a6e22e">remove</span><span style="color:#f92672">(</span>tailNode<span style="color:#f92672">.</span><span style="color:#a6e22e">key</span><span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
            
            node <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(</span>key<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
            insertAtHead<span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
            cache<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span>key<span style="color:#f92672">,</span> node<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            node<span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
            moveToHead<span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">moveToHead</span><span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        removeNode<span style="color:#f92672">(</span>p<span style="color:#f92672">);</span>
        insertAtHead<span style="color:#f92672">(</span>p<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">removeNode</span><span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span><span style="color:#f92672">;</span>
        p<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">insertAtHead</span><span style="color:#f92672">(</span>ListNode p<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        ListNode next <span style="color:#f92672">=</span> DUMMY_HEAD<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        
        p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> next<span style="color:#f92672">;</span>
        next<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span>
        
        DUMMY_HEAD<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span>
        p<span style="color:#f92672">.</span><span style="color:#a6e22e">prev</span> <span style="color:#f92672">=</span> DUMMY_HEAD<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    
    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ListNode</span> <span style="color:#f92672">{</span>
        
        <span style="color:#66d9ef">int</span> key<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> value<span style="color:#f92672">;</span>
        ListNode prev<span style="color:#f92672">;</span>
        ListNode next<span style="color:#f92672">;</span>
        
        <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">ListNode</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> key<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> key<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        
    <span style="color:#f92672">}</span>
    
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="ç›¸äº¤é“¾è¡¨">ç›¸äº¤é“¾è¡¨</h2>
<p>æ‰¾åˆ°ä¸¤ä¸ªé“¾è¡¨çš„ç¬¬ä¸€ä¸ªäº¤é›†çš„è¿™ä¸ª <code>ListNode</code>ã€‚</p>
<ul>
<li><strong>é•¿</strong>çš„å…ˆèµ° <code>diff</code> ä¸ª <code>ListNode</code></li>
<li>ç„¶åä¸€èµ·èµ°ï¼Œé‡åˆ°çš„ç¬¬ä¸€ä¸ªç›¸åŒçš„ <code>ListNode</code> å°±æ˜¯ç»“æœ</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">getIntersectionNode</span><span style="color:#f92672">(</span>ListNode headA<span style="color:#f92672">,</span> ListNode headB<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>   
    <span style="color:#66d9ef">int</span> lenA <span style="color:#f92672">=</span> len<span style="color:#f92672">(</span>headA<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">int</span> lenB <span style="color:#f92672">=</span> len<span style="color:#f92672">(</span>headB<span style="color:#f92672">);</span>

    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>lenA <span style="color:#f92672">&lt;</span> lenB<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> getIntersectionNode<span style="color:#f92672">(</span>headB<span style="color:#f92672">,</span> headA<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    ListNode pA <span style="color:#f92672">=</span> headA<span style="color:#f92672">;</span>
    ListNode pB <span style="color:#f92672">=</span> headB<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">int</span> diff <span style="color:#f92672">=</span> lenA <span style="color:#f92672">-</span> lenB<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>diff <span style="color:#f92672">&gt;</span> 0 <span style="color:#f92672">&amp;&amp;</span> pA <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        pA <span style="color:#f92672">=</span> pA<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        diff<span style="color:#f92672">--;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>pA <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> pB <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>pA <span style="color:#f92672">==</span> pB<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> pA<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        pA <span style="color:#f92672">=</span> pA<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        pB <span style="color:#f92672">=</span> pB<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">len</span><span style="color:#f92672">(</span>ListNode root<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> count <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span>
    ListNode p <span style="color:#f92672">=</span> root<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        count<span style="color:#f92672">++;</span>
        p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">return</span> count<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="k-ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨">K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨</h2>
<ul>
<li>æ‰¾åˆ°ç¬¬ <code>kth</code> ä¸ªèŠ‚ç‚¹</li>
<li>ç¿»è½¬ <code>head</code> åˆ° <code>kth</code> ä¹‹é—´çš„èŠ‚ç‚¹</li>
<li><code>kth.next</code> å°±æ˜¯æ–°çš„ <code>newHead</code>ï¼Œé€’å½’ç¿»è½¬ <code>reverseKGroup(newHead)</code></li>
<li>ä¸Šæ¬¡ç¿»è½¬å®Œçš„ <code>head</code> å˜æˆäº†å°¾å·´ï¼Œè¿™ä¸ª <code>head</code> çš„ <code>next</code> è¦æŒ‡å‘æ–°çš„ <code>reverseKGroup</code> è¿”å›çš„èŠ‚ç‚¹</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">reverseKGroup</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> k<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ListNode kth <span style="color:#f92672">=</span> findKth<span style="color:#f92672">(</span>head<span style="color:#f92672">,</span> k<span style="color:#f92672">);</span>
    
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>kth <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        ListNode newHead <span style="color:#f92672">=</span> kth<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>

        reverse<span style="color:#f92672">(</span>head<span style="color:#f92672">,</span> kth<span style="color:#f92672">);</span>
        head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> reverseKGroup<span style="color:#f92672">(</span>newHead<span style="color:#f92672">,</span> k<span style="color:#f92672">);</span>

        <span style="color:#66d9ef">return</span> kth<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">return</span> head<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">// 1,2,3,4,5 k = 3ï¼Œ
</span><span style="color:#75715e">// é‚£ä¹ˆ æœ€ç»ˆè¿”å›çš„ Node æŒ‡å‘ 3
</span><span style="color:#75715e">// å¦‚æœä¸å¤Ÿï¼Œæ¯”å¦‚ k = 100ï¼Œé‚£ä¹ˆè¿”å› null
</span><span style="color:#75715e"></span><span style="color:#66d9ef">private</span> ListNode <span style="color:#a6e22e">findKth</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> k<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> count <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>
    ListNode p <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>count <span style="color:#f92672">&lt;</span> k <span style="color:#f92672">&amp;&amp;</span> p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        count<span style="color:#f92672">++;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">return</span> count <span style="color:#f92672">==</span> k <span style="color:#f92672">?</span> p <span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">// 1,2,3 =&gt; 3,2,1
</span><span style="color:#75715e"></span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">reverse</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">,</span> ListNode end<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ListNode newHead <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    ListNode p <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> end<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        ListNode next <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        
        p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> newHead<span style="color:#f92672">;</span>
        newHead <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span>

        p <span style="color:#f92672">=</span> next<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    end<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> newHead<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="é“¾è¡¨æ˜¯å¦æœ‰ç¯">é“¾è¡¨æ˜¯å¦æœ‰ç¯</h2>
<blockquote>
<p>è®¾ç½® <code>faster</code> å’Œ <code>slower</code> æŒ‡é’ˆï¼Œ<strong>ç›¸é‡</strong>å³å¯è¯æ˜æœ‰ç¯ã€‚</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">hasCycle</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>head <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    ListNode slower <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
    ListNode faster <span style="color:#f92672">=</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>

    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>slower <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> faster <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>slower <span style="color:#f92672">==</span> faster<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        slower <span style="color:#f92672">=</span> slower<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>

        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>faster<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        faster <span style="color:#f92672">=</span> faster<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="é“¾è¡¨æ‰¾åˆ°ç¯çš„å…¥å£èŠ‚ç‚¹">é“¾è¡¨æ‰¾åˆ°ç¯çš„å…¥å£èŠ‚ç‚¹</h2>
<ul>
<li>å¿«æ…¢æŒ‡é’ˆæ‰¾åˆ°ç›¸é‡èŠ‚ç‚¹ <code>meetNode</code></li>
<li>æ ¹æ® <code>meetNode</code> æ¢æµ‹ç¯çš„é•¿åº¦ <code>cycleLen</code></li>
<li><code>faster</code> æŒ‡é’ˆå…ˆç§»åŠ¨ <code>cycleLen</code> ä¸ª</li>
<li><code>faster</code> å’Œ <code>slower</code> ä¸€èµ·ç§»åŠ¨ï¼Œç›´åˆ°ç›¸é‡</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#75715e">// 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; 1 -&gt; 2 -&gt; 3
</span><span style="color:#75715e">//                     â†‘_________|
</span><span style="color:#75715e">//
</span><span style="color:#75715e">// å‡è®¾é“¾è¡¨é•¿åº¦ä¸º L = 4
</span><span style="color:#75715e">// å‡è®¾ç¯é•¿åº¦ä¸º C = 3
</span><span style="color:#75715e">// å‡è®¾ç›¸é‡æ—¶çš„ç‚¹ï¼Œè·ç¦»ç¯çš„å…¥å£ [é€†æ—¶é’ˆé¡ºåº] é•¿åº¦ä¸º K
</span><span style="color:#75715e">//
</span><span style="color:#75715e">// æœ€ç»ˆç›¸é‡:
</span><span style="color:#75715e">// - å¿«æŒ‡é’ˆèµ°äº† L + m * C + K æ­¥éª¤
</span><span style="color:#75715e">// - æ…¢æŒ‡é’ˆèµ°äº† L + n * C + K æ­¥éª¤
</span><span style="color:#75715e">//
</span><span style="color:#75715e">// L + m * C + K = 2 * (L + n * C + K)
</span><span style="color:#75715e">//
</span><span style="color:#75715e">// åŒ–ç®€å¾—åˆ° m * C = L + 2n * C + K
</span><span style="color:#75715e">// åŒ–ç®€å¾—åˆ° (m - 2n) * C = L + K
</span><span style="color:#75715e">// åŒ–ç®€å¾—åˆ° K = (m - 2n) * C - L = n&#39; * C - L
</span><span style="color:#75715e">//
</span><span style="color:#75715e">// å³ K æ˜¯å¸¸æ•°
</span><span style="color:#75715e">//
</span><span style="color:#75715e">// æ­¤æ—¶ï¼Œç›¸é‡ç‚¹ K çš„ä½ç½®æ˜¯ n&#39; * C - Lï¼Œå®ƒå†èµ° L æ­¥å°±èƒ½åˆ°é“¾è¡¨å…¥å£å¤„
</span><span style="color:#75715e">// è€Œæ­¤æ—¶æ…¢æŒ‡é’ˆä»å¤´å¼€å§‹èµ°ï¼Œä¹Ÿéœ€è¦ L æ­¥æ‰èƒ½åˆ°é“¾è¡¨å…¥å£å¤„ï¼Œæ‰€ä»¥è¿™ä¸ªæ˜¯å¯ä»¥æ‰¾åˆ°å…¥å£çš„
</span><span style="color:#75715e">//
</span><span style="color:#75715e">// è¿˜æœ‰å°±æ˜¯å¦‚ä¸‹è¿™ä¸ªä»£ç ï¼Œfaster ä»å¤´å¼€å§‹ç§»åŠ¨ C ä¸ªï¼Œå› ä¸ºæ€»é•¿åº¦æ˜¯ L + C ä¸ªï¼Œæ‰€ä»¥å…¨ç¨‹è¿˜å‰©ä½™ L ä¸ª
</span><span style="color:#75715e">// æ…¢æŒ‡é’ˆä¹Ÿéœ€è¦èµ° L æ­¥ï¼Œæ‰€ä»¥è¿˜æ˜¯ä¼šç›¸é‡
</span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">LinkedListCycle2</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">detectCycle</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// æ˜¯å¦æœ‰ç¯
</span><span style="color:#75715e"></span>        ListNode meetNode <span style="color:#f92672">=</span> hasCycle<span style="color:#f92672">(</span>head<span style="color:#f92672">);</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>meetNode <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#75715e">// æ±‚å‡ºç¯çš„ä¸ªæ•°
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> cycleLen <span style="color:#f92672">=</span> lengthOfCycle<span style="color:#f92672">(</span>meetNode<span style="color:#f92672">);</span>

        <span style="color:#75715e">// å…ˆç§»åŠ¨ cycleLen ä¸ª
</span><span style="color:#75715e"></span>        ListNode faster <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>cycleLen <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            faster <span style="color:#f92672">=</span> faster<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
            cycleLen<span style="color:#f92672">--;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#75715e">// ä¸€èµ·ç§»åŠ¨
</span><span style="color:#75715e"></span>        ListNode slower <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>faster <span style="color:#f92672">!=</span> slower<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            faster <span style="color:#f92672">=</span> faster<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
            slower <span style="color:#f92672">=</span> slower<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">return</span> slower<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">lengthOfCycle</span><span style="color:#f92672">(</span>ListNode meetNode<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        ListNode p <span style="color:#f92672">=</span> meetNode<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> c <span style="color:#f92672">=</span> 1<span style="color:#f92672">;</span>

        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> meetNode<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
            c<span style="color:#f92672">++;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">return</span> c<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">hasCycle</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>head <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        ListNode slower <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
        ListNode faster <span style="color:#f92672">=</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>

        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>slower <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> faster <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>slower <span style="color:#f92672">==</span> faster<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> slower<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>

            slower <span style="color:#f92672">=</span> slower<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>

            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>faster<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>

            faster <span style="color:#f92672">=</span> faster<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>

        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><h2 id="åˆå¹¶-k-ä¸ªæœ‰åºé“¾è¡¨">åˆå¹¶ K ä¸ªæœ‰åºé“¾è¡¨</h2>
<p>å€ŸåŠ©ä¼˜å…ˆé˜Ÿåˆ— <code>PriorityQueue</code> å³å¯ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">mergeKLists</span><span style="color:#f92672">(</span>List<span style="color:#f92672">&lt;</span>ListNode<span style="color:#f92672">&gt;</span> lists<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ListNode DUMMY <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(-</span>1<span style="color:#f92672">);</span>
    ListNode p <span style="color:#f92672">=</span> DUMMY<span style="color:#f92672">;</span>

    PriorityQueue<span style="color:#f92672">&lt;</span>ListNode<span style="color:#f92672">&gt;</span> queue <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PriorityQueue<span style="color:#f92672">&lt;&gt;(</span><span style="color:#66d9ef">new</span> Comparator<span style="color:#f92672">&lt;</span>ListNode<span style="color:#f92672">&gt;()</span> <span style="color:#f92672">{</span>

        <span style="color:#a6e22e">@Override</span>
        <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">compare</span><span style="color:#f92672">(</span>ListNode n1<span style="color:#f92672">,</span> ListNode n2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>n1<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&lt;</span> n2<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>n2<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&lt;</span> n1<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> 1<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">return</span> 0<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>

    <span style="color:#f92672">});</span>

    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>ListNode node<span style="color:#f92672">:</span> lists<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>node <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            queue<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>node<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(!</span>queue<span style="color:#f92672">.</span><span style="color:#a6e22e">isEmpty</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
        ListNode curr <span style="color:#f92672">=</span> queue<span style="color:#f92672">.</span><span style="color:#a6e22e">poll</span><span style="color:#f92672">();</span>

        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>curr<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            queue<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>curr<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>

        p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> curr<span style="color:#f92672">;</span>
        p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">return</span> DUMMY<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬-n-ä¸ªç»“ç‚¹">åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹</h2>
<p>è¦æ±‚æ˜¯ä¸€éæ‰«æã€‚åªç”¨ä¸€ä¸ªæŒ‡é’ˆä¸è¡Œï¼Œæ‰€ä»¥å¾—ä¸Šä¸¤ä¸ªæŒ‡é’ˆã€‚<a href="https://leetcode-cn.com/problems/remove-nth-node-from-end-of-list/solution/dong-hua-tu-jie-leetcode-di-19-hao-wen-ti-shan-chu/">æ€è·¯</a></p>
<ul>
<li>è®¾ç½®è™šæ‹ŸèŠ‚ç‚¹ <code>dummyHead</code> æŒ‡å‘ <code>head</code></li>
<li>è®¾å®šåŒæŒ‡é’ˆ <code>p</code> å’Œ <code>q</code>ï¼Œåˆå§‹éƒ½æŒ‡å‘è™šæ‹ŸèŠ‚ç‚¹ <code>dummyHead</code></li>
<li>ç§»åŠ¨ <code>q</code>ï¼Œç›´åˆ° <code>p</code> ä¸ <code>q</code> ä¹‹é—´ç›¸éš”çš„å…ƒç´ ä¸ªæ•°ä¸º <code>n</code></li>
<li>åŒæ—¶ç§»åŠ¨ <code>p</code> ä¸ <code>q</code>ï¼Œç›´åˆ° <code>q</code> æŒ‡å‘çš„ä¸º <code>NULL</code></li>
<li>å°† <code>p</code> çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘ä¸‹ä¸‹ä¸ªèŠ‚ç‚¹</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">removeNthFromEnd</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> n<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ListNode DUMMY <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">();</span>
    DUMMY<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>

    ListNode slower <span style="color:#f92672">=</span> DUMMY<span style="color:#f92672">;</span>
    ListNode faster <span style="color:#f92672">=</span> DUMMY<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0<span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> n<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
        faster <span style="color:#f92672">=</span> faster<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>faster <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> faster<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        slower <span style="color:#f92672">=</span> slower<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        faster <span style="color:#f92672">=</span> faster<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    slower<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> slower<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>

    <span style="color:#66d9ef">return</span> DUMMY<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="é‡æ’é“¾è¡¨">é‡æ’é“¾è¡¨</h2>
<p>å¯»æ‰¾é“¾è¡¨ä¸­ç‚¹ + é“¾è¡¨å³åŠæ®µé€†åº + åˆå¹¶é“¾è¡¨</p>
<p>æ³¨æ„å¯»æ‰¾é“¾è¡¨<strong>ä¸­ç‚¹</strong>çš„å†™æ³•ï¼š<code>while (faster.next != null &amp;&amp; faster.next.next != null) { ... }</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">reorderList</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ListNode middle <span style="color:#f92672">=</span> findMiddle<span style="color:#f92672">(</span>head<span style="color:#f92672">);</span>

    ListNode rightHalfHead <span style="color:#f92672">=</span> middle<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    middle<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>

    ListNode reversedRightHalfHead <span style="color:#f92672">=</span> reverse<span style="color:#f92672">(</span>rightHalfHead<span style="color:#f92672">);</span>
    mergeListNode<span style="color:#f92672">(</span>head<span style="color:#f92672">,</span> reversedRightHalfHead<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">// 1 -&gt; [2] -&gt; 3 -&gt; 4, è¿”å› 2
</span><span style="color:#75715e">// 1 -&gt; 2 -&gt; [3] -&gt; 4 -&gt; 5, è¿”å› 3
</span><span style="color:#75715e"></span><span style="color:#66d9ef">private</span> ListNode <span style="color:#a6e22e">findMiddle</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ListNode slower <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
    ListNode faster <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>

    <span style="color:#75715e">// è¿™æ ·å†™
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>faster<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> faster<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        slower <span style="color:#f92672">=</span> slower<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        faster <span style="color:#f92672">=</span> faster<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">return</span> slower<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> ListNode <span style="color:#a6e22e">reverse</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>head <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> head<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    ListNode p <span style="color:#f92672">=</span> reverse<span style="color:#f92672">(</span>head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">);</span>
    head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
    head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">return</span> p<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">mergeListNode</span><span style="color:#f92672">(</span>ListNode headA<span style="color:#f92672">,</span> ListNode headB<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// merge headB -&gt; headA
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 1 -&gt; 2 -&gt; 3
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 5 -&gt; 4
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>headA <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> headB <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        ListNode nextA <span style="color:#f92672">=</span> headA<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        ListNode nextB <span style="color:#f92672">=</span> headB<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>

        headA<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> headB<span style="color:#f92672">;</span>
        headB<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> nextA<span style="color:#f92672">;</span>

        headA <span style="color:#f92672">=</span> nextA<span style="color:#f92672">;</span>
        headB <span style="color:#f92672">=</span> nextB<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ -ii">åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´  II</h2>
<p>ä¸‹é¢ç®—æ³•è™½ç„¶æ­£ç¡®ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è€ƒè™‘å…¶é™åº/å‡åºçš„æ€§è´¨ã€‚</p>
<ul>
<li>å½“é‡å¤å…ƒç´ ï¼Œä¸‹ä¸€ä¸ªå…ƒç´ å¼€å§‹ä¸é‡å¤çš„æ—¶å€™ï¼Œ<code>prev</code> æŒ‡é’ˆä¸éœ€è¦ç§»åŠ¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚åªéœ€è¦è°ƒæ•´ <code>prev.next = p.next</code> å³å¯</li>
</ul>
<pre><code>  1 -&gt; 2 -&gt; 2 -&gt; 2 -&gt; 3
prev             p  
</code></pre><ul>
<li>å½“æ— é‡å¤å…ƒç´ ï¼Œé‚£ä¹ˆ <code>prev</code> è·Ÿç€åç§»å³å¯</li>
</ul>
<pre><code>1 -&gt; 2 -&gt; 3 -&gt; 4
    prev p [ä¸€èµ·åç§»å³å¯]
         prev  p
</code></pre><ul>
<li>æˆ‘ä»¬éœ€è¦ç”¨ <code>hasDuplicated</code> å˜é‡æ¥æ ‡è¯†å½“å‰ <code>prev</code> åº”ä¸åº”è¯¥ç§»åŠ¨</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">deleteDuplicates</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ListNode DUMMY <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">();</span>
    DUMMY<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>

    ListNode prev <span style="color:#f92672">=</span> DUMMY<span style="color:#f92672">;</span>
    ListNode p <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">boolean</span> hasDuplicated <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>

    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">==</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
                hasDuplicated <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                <span style="color:#75715e">// prev -&gt; é‡å¤ -&gt; é‡å¤ -&gt; ä¸é‡å¤
</span><span style="color:#75715e"></span>                <span style="color:#75715e">//                 p
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>hasDuplicated<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                    prev<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
                    hasDuplicated <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                    prev <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>

                p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>hasDuplicated<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                prev<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                prev<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>

            <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">return</span> DUMMY<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="æ’åºé“¾è¡¨">æ’åºé“¾è¡¨</h2>
<p>é¢˜ç›®è¦æ±‚ç©ºé—´å¤æ‚åº¦æ˜¯ <code>O(1)</code>ï¼Œå› æ­¤<strong>ä¸èƒ½ä½¿ç”¨é€’å½’</strong>ã€‚åº”è¯¥ä½¿ç”¨ <code>bottom-to-top</code> ç‰ˆæœ¬çš„å½’å¹¶æ’åºï¼š</p>
<p>TODO</p>
<p><strong>å½’å¹¶æ’åº</strong>ï¼Œå¦‚ä¸‹ä½¿ç”¨é€’å½’ç‰ˆæœ¬çš„å®é™…ä¸Šç©ºé—´å¤æ‚åº¦å¹¶ä¸æ˜¯ <code>O(1)</code>ï¼š</p>
<ol>
<li>æ‰¾åˆ°é“¾è¡¨ä¸­ç‚¹</li>
<li>å·¦åŠæ®µé€’å½’ï¼Œä¸­ç‚¹çš„ <code>next</code> ç½®ä¸º <code>null</code>ï¼Œå³åŠæ®µé€’å½’</li>
<li>å·¦åŠæ®µã€å³åŠæ®µå½’å¹¶</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">sortList</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> mergeSort<span style="color:#f92672">(</span>head<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">// å½’å¹¶æ’åº
</span><span style="color:#75715e"></span><span style="color:#66d9ef">private</span> ListNode <span style="color:#a6e22e">mergeSort</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">){</span>
    <span style="color:#75715e">// å¦‚æœæ²¡æœ‰ç»“ç‚¹/åªæœ‰ä¸€ä¸ªç»“ç‚¹ï¼Œæ— éœ€æ’åºï¼Œç›´æ¥è¿”å›
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>head <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> head<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// å¿«æ…¢æŒ‡é’ˆæ‰¾å‡ºä¸­ä½ç‚¹
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 1 -&gt; 2 -&gt; 3
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// f
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// p
</span><span style="color:#75715e"></span>    ListNode middle <span style="color:#f92672">=</span> findMiddle<span style="color:#f92672">(</span>head<span style="color:#f92672">);</span>

    <span style="color:#75715e">// èŠ‚ç‚¹æ–­æ‰
</span><span style="color:#75715e"></span>    ListNode middleNext <span style="color:#f92672">=</span> middle<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    middle<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>

    <span style="color:#75715e">// å¯¹å·¦åŠéƒ¨åˆ†è¿›è¡Œå½’å¹¶æ’åº
</span><span style="color:#75715e"></span>    ListNode l <span style="color:#f92672">=</span> mergeSort<span style="color:#f92672">(</span>head<span style="color:#f92672">);</span>

    <span style="color:#75715e">// å¯¹å³åŠéƒ¨åˆ†è¿›è¡Œå½’å¹¶æ’åº
</span><span style="color:#75715e"></span>    ListNode r <span style="color:#f92672">=</span> mergeSort<span style="color:#f92672">(</span>middleNext<span style="color:#f92672">);</span>

    <span style="color:#66d9ef">return</span> mergeList<span style="color:#f92672">(</span>l<span style="color:#f92672">,</span> r<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">// 1 -&gt; [2] -&gt; 3 -&gt; 4, è¿”å› 2
</span><span style="color:#75715e">// 1 -&gt; 2 -&gt; [3] -&gt; 4 -&gt; 5, è¿”å› 3
</span><span style="color:#75715e"></span><span style="color:#66d9ef">private</span> ListNode <span style="color:#a6e22e">findMiddle</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    ListNode slower <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>
    ListNode faster <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>

    <span style="color:#75715e">// è¿™æ ·å†™
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>faster<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> faster<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        slower <span style="color:#f92672">=</span> slower<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        faster <span style="color:#f92672">=</span> faster<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">return</span> slower<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">// åˆå¹¶é“¾è¡¨
</span><span style="color:#75715e"></span><span style="color:#66d9ef">private</span> ListNode <span style="color:#a6e22e">mergeList</span><span style="color:#f92672">(</span>ListNode l<span style="color:#f92672">,</span>ListNode r<span style="color:#f92672">){</span>
    <span style="color:#75715e">// ä¸´æ—¶å¤´èŠ‚ç‚¹
</span><span style="color:#75715e"></span>    ListNode tmpHead <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(-</span>1<span style="color:#f92672">);</span>
    ListNode p <span style="color:#f92672">=</span> tmpHead<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>l <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> r <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">){</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>l<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&lt;</span> r<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> l<span style="color:#f92672">;</span>
            l <span style="color:#f92672">=</span> l<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> r<span style="color:#f92672">;</span>
            r <span style="color:#f92672">=</span> r<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        
        p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>l <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">?</span> r <span style="color:#f92672">:</span> l<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">return</span> tmpHead<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>å¿«é€Ÿæ’åº</strong>ç‰ˆæœ¬ï¼Œé¢è¯•å®˜å¯èƒ½ä¼šé—®ã€‚å¿«é€Ÿæ’åºçš„æ•´ä½“æ€è·¯ï¼š</p>
<ol>
<li>å°†ä¸€æ®µé“¾è¡¨ <code>[head] -&gt; ... -&gt; [end]</code> å…ˆè¿›è¡Œ <code>partition</code>ã€‚<code>pivot</code> é€‰æ‹© <code>[1] -&gt; [2] -&gt; [3] -&gt; [4]</code>ï¼Œé‚£ä¹ˆ <code>pivot</code> å°±æ˜¯ <code>head.next = [2]</code>ã€‚</li>
<li><code>quickSort(left)</code></li>
<li><code>quickSort(right)</code></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#66d9ef">public</span> ListNode <span style="color:#a6e22e">sortList</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>head <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> 
        <span style="color:#66d9ef">return</span> head<span style="color:#f92672">;</span>
    
    <span style="color:#75715e">// æ²¡æœ‰æ¡ä»¶ï¼Œåˆ›é€ æ¡ä»¶ã€‚è‡ªå·±æ·»åŠ å¤´èŠ‚ç‚¹ï¼Œæœ€åè¿”å›æ—¶å»æ‰å³å¯ã€‚
</span><span style="color:#75715e"></span>    ListNode newHead <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(-</span>1<span style="color:#f92672">);</span>
    newHead<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> head<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">return</span> quickSort<span style="color:#f92672">(</span>newHead<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>

<span style="color:#75715e">// å¸¦å¤´ç»“ç‚¹çš„é“¾è¡¨å¿«é€Ÿæ’åº
</span><span style="color:#75715e"></span><span style="color:#66d9ef">private</span> ListNode <span style="color:#a6e22e">quickSort</span><span style="color:#f92672">(</span>ListNode head<span style="color:#f92672">,</span> ListNode end<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// head.next.next == end 1 -&gt; 2 -&gt; 1
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>head <span style="color:#f92672">==</span> end <span style="color:#f92672">||</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> end <span style="color:#f92672">||</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">==</span> end<span style="color:#f92672">)</span> 
        <span style="color:#66d9ef">return</span> head<span style="color:#f92672">;</span>

    <span style="color:#75715e">// å°†å°äºåˆ’åˆ†ç‚¹çš„å€¼å­˜å‚¨åœ¨ä¸´æ—¶é“¾è¡¨ä¸­
</span><span style="color:#75715e"></span>    ListNode tmpHead <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ListNode<span style="color:#f92672">(-</span>1<span style="color:#f92672">);</span>
    <span style="color:#75715e">// partitionä¸ºåˆ’åˆ†ç‚¹ï¼Œpä¸ºé“¾è¡¨æŒ‡é’ˆï¼Œtpä¸ºä¸´æ—¶é“¾è¡¨æŒ‡é’ˆ
</span><span style="color:#75715e"></span>    ListNode partition <span style="color:#f92672">=</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">,</span> p <span style="color:#f92672">=</span> partition<span style="color:#f92672">,</span> tp <span style="color:#f92672">=</span> tmpHead<span style="color:#f92672">;</span>
    
    <span style="color:#75715e">// å°†å°äºåˆ’åˆ†ç‚¹çš„ç»“ç‚¹æ”¾åˆ°ä¸´æ—¶é“¾è¡¨ä¸­
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">!=</span> end<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">val</span> <span style="color:#f92672">&lt;</span> partition<span style="color:#f92672">.</span><span style="color:#a6e22e">val</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            tp<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
            tp <span style="color:#f92672">=</span> tp<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>

            p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            p <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// åˆå¹¶ä¸´æ—¶é“¾è¡¨å’ŒåŸé“¾è¡¨ï¼Œå°†åŸé“¾è¡¨æ¥åˆ°ä¸´æ—¶é“¾è¡¨åé¢å³å¯
</span><span style="color:#75715e"></span>    tp<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    
    <span style="color:#75715e">// å°†ä¸´æ—¶é“¾è¡¨æ’å›åŸé“¾è¡¨ï¼Œæ³¨æ„æ˜¯æ’å›ï¼ï¼ˆä¸åšè¿™ä¸€æ­¥åœ¨å¯¹å³åŠéƒ¨åˆ†å¤„ç†æ—¶å°±æ–­é“¾äº†ï¼‰
</span><span style="color:#75715e"></span>    head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span> <span style="color:#f92672">=</span> tmpHead<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
    
    quickSort<span style="color:#f92672">(</span>head<span style="color:#f92672">,</span> partition<span style="color:#f92672">);</span>
    quickSort<span style="color:#f92672">(</span>partition<span style="color:#f92672">,</span> end<span style="color:#f92672">);</span>

    <span style="color:#75715e">// é¢˜ç›®è¦æ±‚ä¸å¸¦å¤´èŠ‚ç‚¹ï¼Œè¿”å›ç»“æœæ—¶å»é™¤
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> head<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div>
<ins class="adsbygoogle"
style="display:block"
data-ad-client="ca-pub-8950855178079071"
data-ad-slot="6142361626"
data-ad-format="auto"
data-full-width-responsive="true"></ins>
</article>
 

      <footer class="book-footer">
        
  <div class="flex justify-between">





</div>

 
        
  
  <div class="book-comments">  </div>
  
 
      </footer>
      
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#åè½¬é“¾è¡¨">åè½¬é“¾è¡¨</a></li>
    <li><a href="#åè½¬é“¾è¡¨-1">åè½¬é“¾è¡¨â…¡</a></li>
    <li><a href="#lru">LRU</a></li>
    <li><a href="#ç›¸äº¤é“¾è¡¨">ç›¸äº¤é“¾è¡¨</a></li>
    <li><a href="#k-ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨">K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨</a></li>
    <li><a href="#é“¾è¡¨æ˜¯å¦æœ‰ç¯">é“¾è¡¨æ˜¯å¦æœ‰ç¯</a></li>
    <li><a href="#é“¾è¡¨æ‰¾åˆ°ç¯çš„å…¥å£èŠ‚ç‚¹">é“¾è¡¨æ‰¾åˆ°ç¯çš„å…¥å£èŠ‚ç‚¹</a></li>
    <li><a href="#åˆå¹¶-k-ä¸ªæœ‰åºé“¾è¡¨">åˆå¹¶ K ä¸ªæœ‰åºé“¾è¡¨</a></li>
    <li><a href="#åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬-n-ä¸ªç»“ç‚¹">åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹</a></li>
    <li><a href="#é‡æ’é“¾è¡¨">é‡æ’é“¾è¡¨</a></li>
    <li><a href="#åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ -ii">åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´  II</a></li>
    <li><a href="#æ’åºé“¾è¡¨">æ’åºé“¾è¡¨</a></li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</body>



</html>












