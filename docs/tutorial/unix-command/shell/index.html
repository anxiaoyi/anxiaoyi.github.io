<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="shell"><meta property="og:title" content="shell" />
<meta property="og:description" content="shell 查看自己正在使用什么 shell：
echo $SHELL 将变量导出到环境变量：
HARLEY=cool export HARLEY  没有简单的方法来区分 shell 变量和环境变量，使用大写可以使变量名突出。
 显示环境变量：
env printenv 显示shell变量：
set 显示变量的值，没有歧义，就可以把花括号去掉。
echo ${ACTIVITY}ing echo $ACTIVITY  当使用变量值的时候，使用花括号是一种好习惯，即便不是必需，这样做可以增强命令的可读性。
 创建变量：
HARLEY=cool WEEDLY=&#34;a cool cat&#34; 修改变量的值：
HARLEY=smart 引用元字符最直接的方法，就是在元字符前面放一个反斜线\，下面这个命令，如果没有反斜线，那么 ; 解释成命令的末尾，然后 come 解释成一条新的命令：
echo It is warm and sunny\; come over and visit 使用双引号引用一串字符，但是保留$、\``、` 的特殊含义。单引号是强引用，单引号内没有字符拥有有特殊的含义。
是不是内置命令：
type command ... history fc -l # c-shell history 重新执行编号为 24 的：
fc -s 24 # c-shell !24 重新执行上一条命令：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kunzhao.org/docs/tutorial/unix-command/shell/" />

<title>shell | 赵坤的个人网站</title>
<link rel="icon" href="/favicon.png" type="image/x-icon">


<link rel="stylesheet" href="/book.min.7ebac727e739c3b4aee6328926e3b77ac1ddd5e9035221b7ec206fda1a413a4d.css" integrity="sha256-frrHJ&#43;c5w7Su5jKJJuO3esHd1ekDUiG37CBv2hpBOk0=">


<script defer src="/en.search.min.445d3520f28f09015151f551c6990497f854d2fe515b552ed0a17bb5c6f8b1fd.js" integrity="sha256-RF01IPKPCQFRUfVRxpkEl/hU0v5RW1Uu0KF7tcb4sf0="></script>
<script>
var _hmt = _hmt || [];
(function() {
  if (location.hostname === "localhost" || 
    location.hostname === "127.0.0.1") {
    return;
  }

  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?d04ff9e23cec6cb39ebbee1b4883e269";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


<script data-ad-client="ca-pub-8950855178079071" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><span>赵坤的个人网站</span>
  </a>
</h2>








  

  
  





 
  
    




  
  <ul>
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/" >
      💡 教程
  </a>


    

    




  
  <ul>
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/front-end-optimization-guide/" >
      前端优化指南
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/algorithm/" >
      算法
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/raft/" >
      raft
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/unix-command/" >
      UNIX 常用命令大全
  </a>


    

    




  
  <ul>
    
      
        <li>

  <a href="/docs/tutorial/unix-command/grep/" >
      grep
  </a>

</li>
      
    
      
        <li>

  <a href="/docs/tutorial/unix-command/find/" >
      find
  </a>

</li>
      
    
      
        <li>

  <a href="/docs/tutorial/unix-command/ls/" >
      ls
  </a>

</li>
      
    
      
        <li>

  <a href="/docs/tutorial/unix-command/ssh/" >
      ssh
  </a>

</li>
      
    
      
        <li>

  <a href="/docs/tutorial/unix-command/shell/"  class="active">
      shell
  </a>

</li>
      
    
      
        <li>

  <a href="/docs/tutorial/unix-command/tcpdump/" >
      tcpdump
  </a>

</li>
      
    
      
        <li>

  <a href="/docs/tutorial/unix-command/top/" >
      top
  </a>

</li>
      
    
      
        <li>

  <a href="/docs/tutorial/unix-command/cat/" >
      cat
  </a>

</li>
      
    
      
        <li>

  <a href="/docs/tutorial/unix-command/os-release/" >
      os-release
  </a>

</li>
      
    
      
        <li>

  <a href="/docs/tutorial/unix-command/sed/" >
      sed
  </a>

</li>
      
    
      
        <li>

  <a href="/docs/tutorial/unix-command/perf/" >
      perf
  </a>

</li>
      
    
      
        <li>

  <a href="/docs/tutorial/unix-command/vim/" >
      Vim 手册
  </a>

</li>
      
    
  </ul>
  



  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/unix-optimize/" >
      UNIX 性能优化
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/vue3/" >
      Vue.js 教程
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/git/" >
      Git 教程
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/network/" >
      网络协议
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/awk/" >
      AWK 教程
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/devops/" >
      DevOps
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/sentinel/" >
      阿里巴巴 Sentinel
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/zipkin/" >
      Zipkin 源码分析
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/eureka/" >
      Netflix Eureka 源码分析
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/distributed-storage/" >
      分布式存储
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/maven/" >
      Maven 教程
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/java/" >
      Java 教程
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/spring/" >
      Spring 教程
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/distributed/" >
      分布式系统与架构设计
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/softskill/" >
      箴言箴句
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/database/" >
      数据库
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/redis/" >
      Redis
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/bigdata/" >
      大数据场景
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/technique/" >
      技术
  </a>


    

    






  </li>


      
    
  </ul>
  



  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/programmer-interview/" >
      👍 程序员面试题
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/rocketmq/" >
      RocketMQ 源码分析
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/books/" >
      书籍
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/javascript/" >
      JavaScript 专栏
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/it-zone/" >
      IT 圈
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/hire/" >
      招聘
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/cloud-plus-bbs/" >
      云&#43;社区技术沙龙
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tools/" >
      实用工具
  </a>


    

    






  </li>


      
    
  </ul>
  



  












<ul>
  
  <li>
    <a href="/posts/" >
        博客
      </a>
  </li>
  
</ul>



</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>shell</strong>

  <label for="toc-control">
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#history">history</a></li>
    <li><a href="#标准输入">标准输入</a></li>
    <li><a href="#子-shell">子 shell</a></li>
    <li><a href="#管道线分流">管道线分流</a></li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
<article class="markdown">
  
<ins class="adsbygoogle"
style="display:block"
data-ad-client="ca-pub-8950855178079071"
data-ad-slot="6142361626"
data-ad-format="auto"
data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script><h1 id="shell">shell</h1>
<p>查看自己正在使用什么 shell：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Bash" data-lang="Bash">echo $SHELL
</code></pre></div><p>将变量导出到环境变量：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">HARLEY<span style="color:#f92672">=</span>cool
export HARLEY
</code></pre></div><blockquote>
<p>没有简单的方法来区分 shell 变量和环境变量，使用大写可以使变量名突出。</p>
</blockquote>
<p>显示<strong>环境变量</strong>：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">env
printenv
</code></pre></div><p>显示<strong>shell</strong>变量：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">set
</code></pre></div><p>显示变量的值，没有歧义，就可以把花括号去掉。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">echo <span style="color:#e6db74">${</span>ACTIVITY<span style="color:#e6db74">}</span>ing
echo $ACTIVITY
</code></pre></div><blockquote>
<p>当使用变量值的时候，使用<strong>花括号</strong>是一种好习惯，即便不是必需，这样做可以增强命令的可读性。</p>
</blockquote>
<p>创建变量：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">HARLEY<span style="color:#f92672">=</span>cool
WEEDLY<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;a cool cat&#34;</span>
</code></pre></div><p>修改变量的值：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">HARLEY<span style="color:#f92672">=</span>smart
</code></pre></div><p>引用元字符最直接的方法，就是在元字符前面放一个反斜线<code>\</code>，下面这个命令，如果没有反斜线，那么 <code>;</code> 解释成命令的末尾，然后 <code>come</code> 解释成一条新的命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">echo It is warm and sunny<span style="color:#ae81ff">\;</span> come over and visit
</code></pre></div><p>使用<strong>双引号</strong>引用一串字符，但是保留<code>$</code>、<code>\``、</code>` 的特殊含义。<strong>单引号是强引用</strong>，单引号内没有字符拥有有特殊的含义。</p>
<p>是不是<strong>内置命令</strong>：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">type command ...
</code></pre></div><h2 id="history">history</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">fc -l
<span style="color:#75715e"># c-shell</span>
history
</code></pre></div><p>重新执行编号为 <code>24</code> 的：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">fc -s <span style="color:#ae81ff">24</span>
<span style="color:#75715e"># c-shell</span>
!24
</code></pre></div><p>重新执行上一条命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">fc -s
!!
</code></pre></div><p>登录文件 <code>.bash_profile</code> 和 <code>.bash_login</code> 或者 <code>.profile</code> (Bash POXIS)，存放着每次登录时希望能够自动执行的命令。</p>
<p>环境文件 <code>.bashrc</code>，存放着所有希望在新 shell 启动时自动执行的命令。</p>
<p>注销文件 <code>.bash_logout</code></p>
<blockquote>
<p>rc 代表 run commands</p>
</blockquote>
<h2 id="标准输入">标准输入</h2>
<p><code>sort</code> 程序期望用户从键盘（<strong>标准输入</strong>）输入数据，每次一行，很多时候也希望重定向标准输入，使其能够从文件中读取数据：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sort &lt; names.txt
</code></pre></div><p>默认情况下，Unix 为每个进程提供3个预定义的文件描述符，0：标准输入，1：标准输出，2：标准错误。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">command 0&lt; inputfile
command 1&gt; outputfile
command 2&gt; errorfile
</code></pre></div><p>在 C-shell 中重定向标准错误：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">command &gt;&amp; outputfile
</code></pre></div><p>正常错误和错误消息发送到一个文件中：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sort 1&gt; output 2&gt;&amp;<span style="color:#ae81ff">1</span>
</code></pre></div><p>同时重定向标准输出和标准错误：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sort &amp;&gt; output
sort &gt;&amp; output
</code></pre></div><p>抛弃输出：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">update &gt; /dev/null
update 2&gt; /dev/null
<span style="color:#75715e"># 抛弃所有输出</span>
update &gt; /dev/null 2&gt;&amp;<span style="color:#ae81ff">1</span>
</code></pre></div><h2 id="子-shell">子 shell</h2>
<p>在子 shell 中运行命令：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">(</span>command<span style="color:#f92672">)</span>
</code></pre></div><h2 id="管道线分流">管道线分流</h2>
<p><code>cat</code> 的输出保存在 <code>d1</code> 和 <code>d2</code> 文件中，同时 <code>cat</code> 的输出还管道传送给 <code>grep</code>：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cat name1 name2 | tee d1 d2 | grep Harley
<span style="color:#75715e"># -a 参数表示追加</span>
cat name1 name2 | tee -a backup | grep Harley
</code></pre></div>
<ins class="adsbygoogle"
style="display:block"
data-ad-client="ca-pub-8950855178079071"
data-ad-slot="6142361626"
data-ad-format="auto"
data-full-width-responsive="true"></ins>
</article>
 

      <footer class="book-footer">
        
  <div class="flex justify-between">





</div>

 
        
  
  <div class="book-comments">  </div>
  
 
      </footer>
      
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#history">history</a></li>
    <li><a href="#标准输入">标准输入</a></li>
    <li><a href="#子-shell">子 shell</a></li>
    <li><a href="#管道线分流">管道线分流</a></li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</body>



</html>












