<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="IBM MQ"><meta property="og:title" content="IBM MQ" />
<meta property="og:description" content="IBM MQ 架构 IBM WebSphere MQ 架构：
IBM WheSphere MQ 特性：
 支持事务 具有特殊的技术防止消息重复传送，确保消息一次且仅一次传递  概念 消息 队列  本地队列：位于本地物理磁盘 远程队列：本地应用程序只能往里面放消息，不能直接读消息。只能从本地队列读取消息 传输队列：临时存储将要发送到远程队列的消息 启动队列：触发中使用的队列，触发器触发事件时，将触发器消息发送到启动队列 死信队列：存储无法正确发送到目的地的消息的队列  通道 通道：提供从一个队列管理器到另外一个队列管理器的通信路径
通道如何使用：
MQSC MQSC 是用来管理队列管理器等对象的脚本命令，可以使用 runmqsc 向队列管理器发出 MQSC 命令。
MQSC 的官方命令文档：The MQSC Commands
MQSC 的一些规则：
 关键字不区分大小写：ALTER、alter、AlteR 都是一样的 很多命令都有同义词：例如 DEFINE CHANNEL 可以写为 def chl 用单引号引用的字符串，IBM MQ 不做转换处理 每条命令必须以新行开始  Control Commands Control Commands 的官方文档：The control commands
发送消息步骤 发送消息前，需要启动队列管理器、启动监听器（监听在某个端口）。
为了把消息从一个队列管理器发送到另一个队列管理器，您需要定义两个通道；一个是在源队列管理器（指明传输队列名、目标系统的IP:PORT），另一个是在目标队列管理器。
为把消息从一个队列管理器发送到另一个队列管理器，您需要定义六个队列；在源队列管理器需要定义四个（远程队列、启动队列、传输队列、死信队列-推荐），目标队列管理器要定义两个（本地队列、死信队列-推荐）。
编程接口 Queue Manager // declare an object of type queue manager MQQueueManager queueManager = new MQQueueManager(); MQQueueManager queueManager = new MQQueueManager(&#34;qMgrName&#34;); ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kunzhao.org/posts/ibmmq/" />
<meta property="article:published_time" content="2020-08-10T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-08-10T00:00:00+00:00" />
<title>IBM MQ | 赵坤的个人网站</title>
<link rel="icon" href="/favicon.png" type="image/x-icon">


<link rel="stylesheet" href="/book.min.215f2c356498a041f9de3ebaab0d56c45dd9a6292b641970f0f751a7bcec3c63.css" integrity="sha256-IV8sNWSYoEH53j66qw1WxF3ZpikrZBlw8PdRp7zsPGM=">


<script defer src="/en.search.min.a811d3829dc9a2b43ada81828f339777f69eba9d804e46b5d0f3f859a442690f.js" integrity="sha256-qBHTgp3JorQ62oGCjzOXd/aeup2ATka10PP4WaRCaQ8="></script>
<script>
var _hmt = _hmt || [];
(function() {
  if (location.hostname === "localhost" || 
    location.hostname === "127.0.0.1") {
    return;
  }

  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?d04ff9e23cec6cb39ebbee1b4883e269";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


<script data-ad-client="ca-pub-8950855178079071" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><span>赵坤的个人网站</span>
  </a>
</h2>








  

  
  





 
  
    




  
  <ul>
    
      
        

  <li >
    
      

  <a href="/docs/tutorial/" >
      💡教程
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/hire/" >
      👉招聘
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/it-zone/" >
      IT 圈
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/rocketmq/" >
      RocketMQ 源码分析
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/javascript/" >
      JavaScript 专栏
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/books/" >
      书籍
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/programmer-interview/" >
      👍 程序员面试题
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/cloud-plus-bbs/" >
      云&#43;社区技术沙龙
  </a>


    

    






  </li>


      
    
      
        

  <li >
    
      

  <a href="/docs/tools/" >
      实用工具
  </a>


    

    






  </li>


      
    
  </ul>
  



  












<ul>
  
  <li>
    <a href="/posts/" >
        博客
      </a>
  </li>
  
</ul>



</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>IBM MQ</strong>

  <label for="toc-control">
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#ibm-mq-架构">IBM MQ 架构</a></li>
    <li><a href="#概念">概念</a>
      <ul>
        <li><a href="#消息">消息</a></li>
        <li><a href="#队列">队列</a></li>
        <li><a href="#通道">通道</a></li>
        <li><a href="#mqsc">MQSC</a></li>
        <li><a href="#control-commands">Control Commands</a></li>
        <li><a href="#发送消息步骤">发送消息步骤</a></li>
      </ul>
    </li>
    <li><a href="#编程接口">编程接口</a>
      <ul>
        <li><a href="#queue-manager">Queue Manager</a></li>
        <li><a href="#mqenvironment">MQEnvironment</a></li>
        <li><a href="#queue">Queue</a></li>
      </ul>
    </li>
    <li><a href="#参考">参考</a></li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
<article class="markdown">
  <h1>
    <a href="/posts/ibmmq/">IBM MQ</a>
  </h1>
  

<div>

  <h5>August 10, 2020</h5>



  
  <div>
    
  </div>
  

  
  <div>
    
        <a href="/tags/mq/">MQ</a>
  </div>
  


</div>


  <p><h2 id="ibm-mq-架构">IBM MQ 架构</h2>
<p>IBM WebSphere MQ 架构：</p>
<p><img src="/images/posts/ibmmq/ibm_mq_architecture.png" alt=""></p>
<p>IBM WheSphere MQ 特性：</p>
<ul>
<li>支持事务</li>
<li>具有特殊的技术防止消息重复传送，确保消息一次且仅一次传递</li>
</ul>
<h2 id="概念">概念</h2>
<h3 id="消息">消息</h3>
<p><img src="/images/posts/ibmmq/msg.png" alt=""></p>
<h3 id="队列">队列</h3>
<ul>
<li>本地队列：位于本地物理磁盘</li>
<li>远程队列：本地应用程序只能往里面放消息，不能直接读消息。只能从本地队列读取消息</li>
<li>传输队列：临时存储将要发送到远程队列的消息</li>
<li>启动队列：触发中使用的队列，触发器触发事件时，将触发器消息发送到启动队列</li>
<li>死信队列：存储无法正确发送到目的地的消息的队列</li>
</ul>
<h3 id="通道">通道</h3>
<p>通道：提供从一个队列管理器到另外一个队列管理器的通信路径</p>
<p><img src="/images/posts/ibmmq/msg_channels.png" alt=""></p>
<p><strong>通道如何使用</strong>：</p>
<p><img src="/images/posts/ibmmq/sender_receiver.png" alt=""></p>
<h3 id="mqsc">MQSC</h3>
<p>MQSC 是用来管理队列管理器等对象的脚本命令，可以使用 <code>runmqsc</code> 向队列管理器发出 MQSC 命令。</p>
<p>MQSC 的官方命令文档：<a href="https://www.ibm.com/support/knowledgecenter/en/SSFKSJ_8.0.0/com.ibm.mq.ref.adm.doc/q085130_.htm">The MQSC Commands</a></p>
<p>MQSC 的一些规则：</p>
<ul>
<li>关键字不区分大小写：<code>ALTER</code>、<code>alter</code>、<code>AlteR</code> 都是一样的</li>
<li>很多命令都有同义词：例如 <code>DEFINE CHANNEL</code> 可以写为 <code>def chl</code></li>
<li>用单引号引用的字符串，IBM MQ 不做转换处理</li>
<li>每条命令必须以新行开始</li>
</ul>
<h3 id="control-commands">Control Commands</h3>
<p>Control Commands 的官方文档：<a href="https://www.ibm.com/support/knowledgecenter/en/SSFKSJ_8.0.0/com.ibm.mq.ref.adm.doc/q083050_.htm">The control commands</a></p>
<h3 id="发送消息步骤">发送消息步骤</h3>
<p>发送消息前，需要启动队列管理器、启动监听器（监听在某个端口）。</p>
<p>为了把消息从一个队列管理器发送到另一个队列管理器，您需要定义两个通道；一个是在源队列管理器（指明传输队列名、目标系统的IP:PORT），另一个是在目标队列管理器。</p>
<p>为把消息从一个队列管理器发送到另一个队列管理器，您需要定义六个队列；在源队列管理器需要定义四个（远程队列、启动队列、传输队列、死信队列-推荐），目标队列管理器要定义两个（本地队列、死信队列-推荐）。</p>
<h2 id="编程接口">编程接口</h2>
<h3 id="queue-manager">Queue Manager</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#75715e">// declare an object of type queue manager
</span><span style="color:#75715e"></span>MQQueueManager queueManager <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MQQueueManager<span style="color:#f92672">();</span>
MQQueueManager queueManager <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> MQQueueManager<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;qMgrName&#34;</span><span style="color:#f92672">);</span>

<span style="color:#f92672">...</span>
<span style="color:#75715e">// do something...
</span><span style="color:#75715e"></span><span style="color:#f92672">...</span>
<span style="color:#75715e">// disconnect from the queue manager
</span><span style="color:#75715e"></span>queueManager<span style="color:#f92672">.</span><span style="color:#a6e22e">disconnect</span><span style="color:#f92672">();</span>
</code></pre></div><h3 id="mqenvironment">MQEnvironment</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java">MQEnvironment<span style="color:#f92672">.</span><span style="color:#a6e22e">hostname</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;host.domain.com&#34;</span><span style="color:#f92672">;</span>
MQEnvironment<span style="color:#f92672">.</span><span style="color:#a6e22e">channel</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;java.client.channel&#34;</span><span style="color:#f92672">;</span>
<span style="color:#75715e">// 默认 port 是 1414
</span><span style="color:#75715e"></span>MQEnvironment<span style="color:#f92672">.</span><span style="color:#a6e22e">port</span> <span style="color:#f92672">=</span> nnnn<span style="color:#f92672">;</span>
MQEnvironment<span style="color:#f92672">.</span><span style="color:#a6e22e">CCSID</span> <span style="color:#f92672">=</span> 1381<span style="color:#f92672">;</span><span style="color:#75715e">//这个是编码格式的代号,UTF-8为1381
</span><span style="color:#75715e"></span>MQEnvironment<span style="color:#f92672">.</span><span style="color:#a6e22e">userID</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;MUSR_MQADMIN&#34;</span><span style="color:#f92672">;</span><span style="color:#75715e">//这个是登录MQ服务器用的用户名，需要在MQ服务器上设置
</span><span style="color:#75715e"></span>MQEnvironment<span style="color:#f92672">.</span><span style="color:#a6e22e">password</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;123456&#34;</span><span style="color:#f92672">;</span><span style="color:#75715e">//这个是登录MQ服务器用的密码
</span></code></pre></div><h3 id="queue">Queue</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#75715e">// 打开队列
</span><span style="color:#75715e"></span>MQQueue queue <span style="color:#f92672">=</span> queueManager<span style="color:#f92672">.</span><span style="color:#a6e22e">accessQueue</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;qName&#34;</span><span style="color:#f92672">,</span>CMQC<span style="color:#f92672">.</span><span style="color:#a6e22e">MQOO_OUTPUT</span><span style="color:#f92672">);</span>
queue<span style="color:#f92672">.</span><span style="color:#a6e22e">close</span><span style="color:#f92672">();</span>
</code></pre></div><h2 id="参考">参考</h2>
<ul>
<li>《IBM WebShpere MQ 入门教程》</li>
<li>整体教程参考：<a href="https://www.ibm.com/support/knowledgecenter/SSFKSJ_8.0.0/com.ibm.mq.dev.doc/q030730_.htm">Writing IBM MQ classes for Java applications</a></li>
</ul>
</p>
</article>
 

      <footer class="book-footer">
        
  <div class="flex justify-between">





</div>

 
        
  
  <div class="book-comments">  
  
  <div id="vcomments"></div>
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src='//unpkg.com/valine/dist/Valine.min.js'></script>

  <script type="text/javascript">
    new Valine({
        el: '#vcomments' ,
        appId: 'Hw2fQnNQyghcgeRvQosC5cIy-gzGzoHsz',
        appKey: '0ULuPWcxGRLCaHz84icXvBgn',
        notify: 'false', 
        verify: 'false', 
        avatar:'mm', 
        placeholder: '说点什么吧...',
        visitor: 'true'
    });
  </script></div>
  
 
      </footer>
      
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#ibm-mq-架构">IBM MQ 架构</a></li>
    <li><a href="#概念">概念</a>
      <ul>
        <li><a href="#消息">消息</a></li>
        <li><a href="#队列">队列</a></li>
        <li><a href="#通道">通道</a></li>
        <li><a href="#mqsc">MQSC</a></li>
        <li><a href="#control-commands">Control Commands</a></li>
        <li><a href="#发送消息步骤">发送消息步骤</a></li>
      </ul>
    </li>
    <li><a href="#编程接口">编程接口</a>
      <ul>
        <li><a href="#queue-manager">Queue Manager</a></li>
        <li><a href="#mqenvironment">MQEnvironment</a></li>
        <li><a href="#queue">Queue</a></li>
      </ul>
    </li>
    <li><a href="#参考">参考</a></li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>



</html>












